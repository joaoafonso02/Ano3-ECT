<!DOCTYPE html>

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="copyright" content="MACode ID, https://macodeid.com/">

    <title>eHealthCorp</title>

    <link rel = "icon" href="../assets/img/logo.png" >

    <link rel="stylesheet" href="../assets/css/maicons.css">

    <link rel="stylesheet" href="../assets/css/bootstrap.css">

    <link rel="stylesheet" href="../assets/vendor/owl-carousel/css/owl.carousel.css">

    <link rel="stylesheet" href="../assets/vendor/animate/animate.css">

    <link rel="stylesheet" href="../assets/css/theme.css">

    <link rel="stylesheet" href="../assets/css/styles.css">

    
    <style>
        table.GeneratedTable {
        width: 100%;
        background-color: #ffffff;
        border-collapse: collapse;
        border-width: 2px;
        border-color: #41484c;
        border-style: solid;
        color: #000000;
        }

        table.GeneratedTable td, table.GeneratedTable th {
        border-width: 2px;
        border-color: #41484c;
        border-style: solid;
        padding: 3px;
        }

        table.GeneratedTable thead {
        background-color: #4fe9c4;
        }
    </style>



    
    
</head>



<body>
    <header id="header">
        
    </header>

        <section class="text-center text-lg-start">
            <style>
                .cascading-right {
                margin-right: -50px;
                }

                @media (max-width: 991.98px) {
                .cascading-right {
                    margin-right: 0;
                }
                }
            </style>

            <div class="page-section">
                <div class="container">
                    </br>
                    </br>
                    </br>
                    </br>
                    </br>
                
                    <h1 style="color:#20E5BE" class="text-center wow fadeInDown">Insert Code</h1>
                    </br>
                
                    <form >
                        <div text-align:center>
                            <input id="makeAppointmentPhone" class="form-control" type="text"  placeholder="Code" class="center-block" style="width: 200px;"  required></input>
                        </div>
                        
                    
                        <button type="button" class="btn btn-primary mt-3 wow fadeInUp"  onclick="useCode()" >Submit Request</button>
                        <!-- data-toggle="modal" data-target="#exampleModal"-->
                    </form>
                    <!-- <center><p id="copyright">Copyright &copy; 2020 <a href="https://macodeid.com/" target="_blank">MACode ID</a>. All right reserved</p><center> -->
                    
            
        </div>
        </div> <!-- .page-section -->
            <!-- Section: Design Block -->


                <!-- POP UPPPPPP -->
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                    <div class="modal-body">
                    <h3 id="modalUsername" >Your Test Results:</h3> <!-- JS to resp.username like: "admin's Test Results: " -->
                    </div>
                    <div id="table" class="modal-header">
        
                        <table  id="table" class="GeneratedTable">
                        
                            <thead>
                            <!-- The Row Number 0 -->
                            <tr>
                                <th>Test</th>
                                <th>Result</th>
                                <th>Units</th>
                                <th>Reference Interval</th>
                            </tr>
                            <thead>
                            <tbody align="center" id="table_data_response">
                    
                            </tbody>
                        
                    </table>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                            <h4>For other information, please contact us!</h4> 
                        </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-secondary" data-dismiss="modal" >Close</button>
                        <!-- POP UPPPPPP<button type="button" class="btn btn-primary">Save changes</button> -->
                    </div>
                    </div>
                    
                </div>

        <!-- JavaScript Bundle with Popper -->
            <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->

            <script src="../assets/js/jquery-3.5.1.min.js"></script>

            <script src="../assets/js/bootstrap.bundle.min.js"></script>

            <script src="../assets/vendor/owl-carousel/js/owl.carousel.min.js"></script>

            <script src="../assets/vendor/wow/wow.min.js"></script>

            <script src="../assets/js/theme.js"></script>

            <!-- COMPONENTS -->
            <script src="./components/header.js"></script>

            <!-- CUSTOM JS -->
            <script src="./js/navbarAuth.js"></script>


             <!-- JavaScript FOR TABLE  -->

            <script>

const useCode = () => {
    let code = document.querySelector("#makeAppointmentPhone").value
    console.log({code})
    fetch('http://localhost:8081/api/consult/usecode',
        {
            method:'POST',
            headers: {'x-access-token': localStorage.getItem('x-access-token')},
            body: JSON.stringify({code})
        })
        .then(resp => resp.json())
        .then(data => {
            console.log(data)

            $("#exampleModal").modal('show');
            const arr = [ 
                ["Albumin", "ALT (SGPT)", "AST (SGOT)", "Alkaline Phosphatase", "Total Billirubin", "BUN","Calcium","Chloride","Creatinine","Glucose","Lactate Dehydro.","Magnesium","Potassium","Sodium","Total Protein","Uric Acid"],  
                data.test, 
                ["g/dL","IU/L","IU/L","mg/DL","mg/DL","mg/DL","mg/DL","mmol/L","mg/DL","mg/DL","IU/L","mmol/L","mmol/L","mmol/L","g/dL","mmol/L"],
                ["3.5 - 5.0","6 - 31","11 - 36","38 - 126","0.2 - 1.3","7 - 17","8.4 - 10.2","98 - 107","0.7 - 1.2","65 - 105","100 - 250", "0.65 - 1.05","3.6 - 5.0","137 - 145","6.3 - 8.2","227 - 367/467"] 
            ];

            
            document.getElementById("table_data_response").innerHTML = ['<tr>', ...arr.reduce((acc, item, i) => {
                const row = (acc[i] || '<td>') + item.join('<br/>') + '</td>';
                acc.push(row);
                return acc;
            }, []), '</tr>'].join("");
        })
        .catch((error) => { 
            // console.error("Error:", error);
            alert("User needs to be logged!");
        })
};
            </script>       

</body>


